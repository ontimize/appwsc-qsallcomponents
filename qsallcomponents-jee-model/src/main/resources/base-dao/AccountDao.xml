<?xml version="1.0" encoding="UTF-8"?>
<JdbcEntitySetup xmlns="http://www.ontimize.com/schema/jdbc"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.ontimize.com/schema/jdbc http://www.ontimize.com/schema/jdbc/ontimize-jdbc-dao.xsd"
	table="ACCOUNTS" datasource="mainDataSource" sqlhandler="dbSQLStatementHandler">
	<DeleteKeys>
		<Column>ACCOUNTID</Column>
	</DeleteKeys>
	<UpdateKeys>
		<Column>ACCOUNTID</Column>
	</UpdateKeys>
	<GeneratedKey>ACCOUNTID</GeneratedKey>

	<!-- SELECT ACCOUNTS.ACCOUNTID, ACCOUNTS.ENTITYID, ACCOUNTS.OFFICEID, ACCOUNTS.CDID, 
		ACCOUNTS.ANID, SUM(MOVEMENTS.MOVEMENT) AS BALANCE, ACCOUNTS.STARTDATE, ACCOUNTS.ENDDATE, 
		ACCOUNTS.INTERESRATE,INTERESRATE, ACCOUNTS.ACCOUNTTYP, ACCOUNTTYPEID, ACCOUNTTYPENAME -->
	<Queries>
		<Query id="VACCOUNTBALANCE">
			<Sentence>
				<![CDATA[
					SELECT
						#COLUMNS#
				    FROM (
				    	SELECT ACCOUNTS.ACCOUNTID, ACCOUNTS.ENTITYID, ACCOUNTS.OFFICEID, ACCOUNTS.CDID, ACCOUNTS.ANID, SUM(MOVEMENTS.MOVEMENT) AS BALANCE, ACCOUNTS.STARTDATE, ACCOUNTS.ENDDATE, ACCOUNTS.INTERESRATE, ACCOUNTS.ACCOUNTTYP, ACCOUNTTYPEID, ACCOUNTTYPENAME
					FROM ACCOUNTS
						LEFT OUTER JOIN MOVEMENTS ON ACCOUNTS.ACCOUNTID = MOVEMENTS.ACCOUNTID
						LEFT OUTER JOIN ACCOUNTTYPES ON ACCOUNTS.ACCOUNTTYPEID = ACCOUNTTYPES.ACCOUNTTYPEID
					GROUP BY ACCOUNTS.ACCOUNTID, ACCOUNTS.ENTITYID, ACCOUNTS.OFFICEID, ACCOUNTS.CDID, ACCOUNTS.ANID, ACCOUNTS.STARTDATE, ACCOUNTS.ENDDATE, ACCOUNTS.INTERESRATE, ACCOUNTS.ACCOUNTTYP, ACCOUNTS.ACCOUNTTYPEID, ACCOUNTTYPENAME
	          		#ORDER#
	          		)
	          		#WHERE#
				]]>
			</Sentence>
		</Query>

		<Query id="VACCOUNTCONCEPTS">
			<Sentence>
				<![CDATA[
					SELECT 
						ACCOUNTS.ACCOUNTID, MOVEMENTS.CONCEPT 
					FROM ACCOUNTS 
						LEFT OUTER JOIN MOVEMENTS ON ACCOUNTS.ACCOUNTID = MOVEMENTS.ACCOUNTID 
					#WHERE#			
					GROUP BY ACCOUNTS.ACCOUNTID, MOVEMENTS.CONCEPT
					#ORDER#	
				]]>
			</Sentence>
		</Query>

		<Query id="VACCOUNTMOVEMENTTYPES">
			<Sentence>
				<![CDATA[
					SELECT 
						ACCOUNTS.ACCOUNTID, MOVEMENTTYPES.DESCRIPTION
					FROM ACCOUNTS 
				        LEFT OUTER JOIN MOVEMENTS ON ACCOUNTS.ACCOUNTID = MOVEMENTS.ACCOUNTID 
				        LEFT OUTER JOIN MOVEMENTTYPES ON MOVEMENTTYPES.MOVEMENTTYPEID = MOVEMENTS.MOVEMENTTYPEID 
					#WHERE#
					GROUP BY ACCOUNTS.ACCOUNTID, MOVEMENTTYPES.DESCRIPTION
					#ORDER#
				]]>
			</Sentence>
		</Query>
	</Queries>

</JdbcEntitySetup>
